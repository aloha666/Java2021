# 概念：是什么，怎么用，特点/优缺点

# 三到四句话+自己的理解

# Lec1

## Questions

### 1. what is a maven? pom file? dependency?buidl tool?

### 2. what is a life cycle of a maven project?

### 3. what is the JVM run time area contains? what each part do?

### 4. where is a string pool store in JVM runtime data area?

### 5. what is a class class and reflction API?

### 6. what is the difference between == and equals?

### 7. how to override the equals method?

### 8. what is pass by value vs pass by reference?

### 9. what is the difference between list and set?

### 10. what is a concurrentHashMap and how it works?

### 11. what is a LinkedHashMap and how it works?



## Answers:

### 1. what is a maven? pom file? dependency?build tool?

```
Apache Maven is a **software project management and comprehension tool**.

POM stands for "Project Object Model". It is an XML representation of a Maven project held in a file named pom.xml. The POM contains all necessary information about a project, as well as configurations of plugins to be used during the build process.

In Maven, dependency is another archive—JAR, ZIP, and so on—which your current project needs in order to compile, build, test, and/or to run. The dependencies are gathered in the pom.xml file, inside of a <dependencies> tag.

Maven is a build automation tool used primarily for Java projects.

```



### 2. what is a life cycle of a maven project?

```
- `validate` - validate the project is correct and all necessary information is available
- `compile` - compile the source code of the project
- `test` - test the compiled source code using a suitable **unit testing** framework. These tests should not require the code be packaged or deployed
- `package` - take the compiled code and package it in its distributable format, such as a JAR.
- `verify` - run any checks on results of **integration tests** to ensure quality criteria are met
- `install` - install the package into the local repository, for use as a dependency in other projects locally
- `deploy` - done in the build environment, copies the final package to the remote repository for sharing with other developers and projects.
```



### 3. what is the JVM run time area contains? what each part do?

```
Heap Area: It is a shared runtime data area and stores the **actual object** in a memory. It is instantiated during the virtual machine startup. There exists one and only one heap for a running JVM process.

Method Area: It is a **logical part** of the heap area and is created on virtual machine startup. for Metadata? string pool?

Stack:A stack is created at the same time when a **thread** is created and is used to store data and partial results which will be needed while returning value for method and performing dynamic linking.Needs not to be contiguous 连续. 

Native Method Stack: A Native Method Stack stores similar data elements as a JVM Stack and it is used to help executing native (non-Java) methods. such as: start0 in thread.start();

PC Registers: Each **JVM thread** which carries out the task of a specific method has a **program counter register** associated with it. The non native method has a PC which stores the address of the available JVM instruction whereas in a native method, the value of program counter is undefined. PC register is capable of storing the return address or a native pointer on some specific platform.

```



### 4. where is a string pool store in JVM runtime data area?

### 5. what is a class class and reflction API ? - in later lectures



### 6. what is the difference between == and equals?

```
Compare with == : Will compare the reference value ( the pointed location) 

Compare with equals(Object obj) : Will call the equals method of the object (default is ==, but we can override, like String, then it will compare using the override method, for string, it compares if the chars are the same)
```



### 7. how to override the equals method?

```
need to override equals and hashCode object.
```

### 8. what is pass by value vs pass by reference?



### 9. what is the difference between list and set?

```java
List: An ordered collection. Allow duplicated(how to define? explaination in below) element. Commonly used ArrayList, LinkedList. Resize factor:0.5

Set: A collection that contains **no duplicate** elements. Sets contain no pair of elements e1 and e2 such that **e1.equals(e2)**, and at most one null element.
```



### 10. what is a concurrentHashMap and how it works?

```
multi-thread safe HashMap, use in high concurrecy situation. separate data to segement and assgin each seagemtn a lock.
get: a;; va;ie are volatile, visiable to all theads
put: find segment - lock - check - unlock
```



### 11. what is a LinkedHashMap and how it works?

```j
Maintain the insertion order of the key-value pairs. This implementation differs from HashMap in that it maintains a doubly-linked list running through all of its entries. This linked list defines the iteration ordering, which is normally the order in which keys were inserted into the map (insertion-order). Note that insertion order is not affected if a key is re-inserted into the map.
```



# Lec2

## Questions:

### 1. describe how a java program run

### 2. what is a class loader? 

### 4. what is auto-boxing and unboxing?

### 5. what is a wrapper class?

### 6.  what is the differece between final and static? (immutable class)

### 7. can a static method contains a static variable?

### 8. what is the differece between exception and error? 

### 9. can you catch an error?

### 10. what is garbage collector and which part of JVM it is working on?



## Answers:

### 1. describe how a java program run

```java
complier -> bytecode (.class) -> JVM -> class loader -> bytecode verification -> just in time compiler to machine code
```



### 2. what is a class loader? 

```
Class loaders are responsible for loading Java classes during runtime dynamically to the JVM (Java Virtual Machine). Also, they are part of the JRE (Java Runtime Environment). Hence, the JVM doesn't need to know about the underlying files or file systems in order to run Java programs thanks to class loaders.
```

```
Based on Classloader wikipedia there are 3 types of classloaders in JRE:

Bootstrap class loader
This class loader, which is part of the core JVM, is written in native code

Extensions class loader
It is implemented by the sun.misc.Launcher$ExtClassLoader class

System class loader
This is implemented by the sun.misc.Launcher$AppClassLoader class

So i think in conclusion: first one is in JVM the other 2 is in JRE libraries.
```



### 4. what is auto-boxing and unboxing?

```java
autoboxing -> int to Integer  Java compiler makes between the primitive types and their corresponding object wrapper classes. 
unboxing -> Integer to int
```



### 5. what is a wrapper class?

```
A Wrapper class is a class whose object wraps or contains primitive data types. To transfter the primitive type to object.
```



### 6.  what is the differece between final and static? (immutable class)

```
The main difference between a static and final keyword is that static is keyword is used to define the class member that can be used independently of any object of that class. Final keyword is used to declare, a constant variable, a method which can not be overridden and a class that can not be inherited.

However 静态的方法可以被继承，但是不能重写。那静态方法和final method有什么区别？
```



### 7. can a static method contains a static variable?

```
You can't declare a static variable inside a method, static means that it's a variable/method of a class, it belongs to the whole class but not to one of its certain objects. This means that static keyword can be used only in a 'class scope' i.e. it doesn't have any sense inside methods.
```



### 8. what is the differece between exception and error? 

```
Error:An Error is a subclass of Throwable that indicates serious problems that a reasonable application should not try to catch. Most such errors are abnormal conditions.

Exception:

Checked Exception: Has to be try-catched or decleared using throws keyword on method. compile编译时检查

UnChecked Exception: Don't need to be try-catched or decleared.可以catch 但没必要， 运行时抛出

Throwable is the parent class of all exceptions and errors.
```



### 9. can you catch an error?

### 10. what is garbage collector and which part of JVM it is working on?

```
The ***heap*** is where your object data is stored. This area is then managed by the garbage collector selected at startup. Most tuning options relate to sizing the heap and choosing the most appropriate garbage collector for your situation.

Automatic garbage collection is the process of looking at heap memory, identifying which objects are in use and which are not, and deleting the unused objects. An in use object, or a referenced object, means that some part of your program still maintains a pointer to that object. An unused object, or unreferenced object, is no longer referenced by any part of your program. So the memory used by an unreferenced object can be reclaimed.

- Mark – it is where the garbage collector identifies which pieces of memory are in use and which are not
- Sweep – this step removes objects identified during the “mark” phase
```

# Lec3

## Questions

### 1. what is the difference between stacloverflow and out of memory?

### 2. what is Java Generics?

### 3. what is enum class? what is used for?

### 4.  what is java annotation? 

### 5. what is a cusomized java annotations?

### 6. what is a file class?

### 7. what if the difference between byete stream and character stream?

### 8. what if the difference between file stream and buffer stream?

### 9. why @Test is ruuning without main method?



## Answers

### 1. what is the difference between stacloverflow and out of memory?

```
stackoverflow - two many functions called in stack area
outofmemory - too much objects created in heap area
```



### 2. what is Java Generics?

```
泛型其实就是在定义类、接口、方法的时候不局限地指定某一种特定类型，而让类、接口、方法的调用者来决定具体使用哪一种类型的参数。

```

### 3. what is enum class? what is used for?

```
A *Java Enum* is a special Java type used to define **collections of constants**.
used for:Enums are used when we know all possible values at compile time.
```



### 4.  what is java annotation? 

```
Annotations provide data about a program that is **not** part of the program itself. its used as  complier, build time and runtime instructions. Examples for each?
A Java annotation can have elements for which you can set values. An element is like an attribute or parameter.
You can place Java annotations above classes, interfaces, methods, method parameters, fields and local variables.

@Deprecated – 所标注内容不再被建议使用；
@Override – 只能标注方法，表示该方法覆盖父类中的方法；

@SuppressWarnings – 所标注内容产生的警告，编译器会对这些警告保持静默；

@interface – 用于定义一个注解；**
```



### 5. what is a cusomized java annotations?

```
https://zhuanlan.zhihu.com/p/27643133 Java 注解 （Annotation）你可以这样学

@Retention – 只能被用来标注“Annotation类型”，而且它被用来指定Annotation的RetentionPolicy属性；**
			 - RetentionPolicy.SOURCE 注解只在源码阶段保留，在编译器进行编译时它将被丢弃忽视。
             - RetentionPolicy.CLASS 注解只被保留到编译进行的时候，它并不会被加载到 JVM 中。 
             - RetentionPolicy.RUNTIME 注解可以保留到程序运行的时候，它会被加载进入到 JVM 中，所以在程序运行时可以获取到它们。
@Documented --所标注内容可以出现在javadoc中；
				
@Target – 只能被用来标注“Annotation类型”，而且它被用来指定Annotation的ElementType属性；**
@Inherited – 只能被用来标注“Annotation类型”，它所标注的Annotation具有继承性；**
@Repeatable 可重复，通常是注解的值可以同时取多个。


```



### 6. what is a file class?

```
The File class is Java’s representation of a file or directory path name. Because file and directory names have different formats on different platforms, a simple string is not adequate to name them.
```



### 7. what if the difference between byete stream and character stream?

```
ByteStream: InputStream, OutputStream 它们以8-bit为单位处理数据，即字节流类读取/写入8位数据。使用这些可以存储字符，视频，音频，图像等。Byte oriented reads byte by byte.

CharacterStream: Reader, Writer 这些以16-bit Unicode处理数据。使用这些只能读取和写入**文本数据**(text files)。
```



### 8. what if the difference between file stream and buffer stream?

```
A FileInputStream obtains input bytes from a file in a file system. What files are available depends on the host environment. FileInputStream is meant for reading streams of raw bytes such as image data. 

The *Java* *BufferedInputStream* class, java.io.BufferedInputStream, provides transparent reading of **chunks of bytes** and buffering for a [Java InputStream](http://tutorials.jenkov.com/java-io/inputstream.html), including any subclasses of InputStream.

. **Reading larger chunks of bytes and buffering them can speed up IO quite a bit.** Rather than read one byte at a time from the network or disk, the BufferedInputStream reads **a larger block at a time into an internal buffer.*
```



### 9. why @Test is ruuning without main method?

```
with junit package, you can run method without the main method
```



# Lec4

## Questions

### 1. What is the difference between InputStreamReader and FileReader?

### 2. Why use char[] to read input String? Why not use a char[] size as the file size?

### 3. what is a flush()? what is a close()?

### 4. What is an objectstream?

### 5. What is a serilizable Interface? What is a serialVerisionUID?

### 6. What is the transient and static keyword in serialiable interface?

### 7. serialVerisionUID is static, how can it pass to object stream?

### 8. What is a Lambda Expression?

### 9. can a lambda expression change the parameter value?

### 10.  what is the difference between a lambda expression and an annoymouns class?

### 11. what is a functional interface?

### 12.what is the four typical functional interface? and How they work?

### 13. What is a stream API and what it can do?

### 14. what is the output of a stream? 中间操作？终端操作？



## Answers

### 1. What is the difference between InputStreamReader and FileReader?

```
InputStreamReader读bytes然后转化成character，同时可以指定编码的方式(GBK, UTF-8, etc)，filereader直接读character。
InputStreamReader can handle all inout stremas( a socket, an HTTP connection, a database blob), not only files, FileReader can only reads character from a file in the file system.

"**I usually prefer using an InputStreamReader wrapping a FileInputStream to read from a file because it allows specifying a specific character encoding.**"
```

### 2. Why use char[] to read input String? Why not use a char[] size as the file size?

```java
用来减少IO inter actinons between JVM and hard disk. 比一个一个读要快
```

### 3. what is a flush()? what is a close()?

```
**flush():** Flushes the output stream and forces any buffered output bytes to be written out. 
**close():** always close a buffer after use.
```



### 4. What is an objectstream?

```
objectstream is the bytestrem of object, if it is not serizalized, it will be unreadable after input.
```



### 5. What is a serilizable Interface? What is a serialVerisionUID?

```
serilizable Interface: serialization is a mechanism of converting the state of an object into a byte stream. 

Serialization is done using ObjectOutputStream. Deserialization is the reverse process where the byte stream is used to recreate the actual Java object in memory. This mechanism is used to persist the object. Deserialization is done using ObjectInputStream.
注意：Serialization 用 ObjectOutputStream， Deserialization 用 ObjectInputStream
序列化：对象的寿命通常随着生成该对象的程序的终止而终止，有时候需要把在内存中的各种对象的状态（也就是实例变量，不是方法）保存下来，并且可以在需要时再将对象恢复。虽然你可以用你自己的各种各样的方法来保存对象的状态，但是Java给你提供一种应该比你自己的好的保存对象状态的机制，那就是序列化。
```



### 6. What is the transient and static keyword in serialiable interface?

```java
static: variable will be not saved after Serialization
trasient: variable will be not saved after Serialization, but it is not a static varibale/method. used when static is not suitable
    

```



### 7. serialVerisionUID is static, how can it pass to object stream?

```
 UID is static but is also passed in the bytestream, it is an exception.
```

### 8. What is a Lambda Expression?

```
one line statement, a simpified anonymous method. can be used as an argument in the functional interface.
```

### 9. can a lambda expression change the parameter value?

```
No
```

### 10.  what is the difference between a lambda expression and an annoymouns class?

```
the this keyword in annoymouns class is point to the class iteself, while the this keyword in lambad expresiion is point to the class using lambda exprssion.
```



### 11. what is a functional interface?

```
Functional interface is a kind of interface that has **only 1 abstract method**.

Functional Interface是指带有 @FunctionalInterface 注解的interface。它的特点是其中只有一个子类必须要实现的abstract方法。如果abstract方法前面带有default关键字，则不做计算。其实这个也很好理解，因为Functional Interface改写成为lambda表达式之后，并没有指定实现的哪个方法，如果有多个方法需要实现的话，就会有问题。
```

### 12.what is the four typical functional interface? and How they work?（小抄）

```
function<T,R>: apply(T) method 作用：使用传入的lambda expression 对传入数据T（一般是collection)进行操作，返回结果R。有进有出
Consumer<T>: accept(T) method 作用：接受传入参数T，不返回。只进不出，
Predicate<T>: test(T) method 作用：使用传入的lambda expression 对传入数据T（一般是collection)进行判断 返回真假
Supplier<T>： get() method 作用：不传入参数，返回一个指定的T值（类如randomInt）不劳而获
```



### 13. What is a stream API and what it can do?

```
//https://stackify.com/streams-guide-java-8/

A stream does not store data and, in that sense, is not a data structure. It also never modifies the underlying data source.This functionality – java.util.stream – supports functional-style operations on streams of elements, such as map-reduce transformations on collections.

 A steam is a list will not save the element by it will do the calculation when needed.
 
基本method：
forEach：it loops over the stream elements, calling the supplied function on each element.
map: produces a new stream after applying a function to each element of the original stream
collect: its one of the common ways to get stuff out of the stream once we are done with all the processing
filter： this produces a new stream that contains elements of the original stream that pass a given test (specified by a Predicate).

```



### 14. what is the output of a stream? 中间操作？终端操作？

```
intermediate operations:intermediate operations such as filter() return a new stream on which further processing can be done.

terminal operations:erminal operations, such as forEach(), mark the stream as consumed, after which point it can no longer be used further.
```

# Lec5

### 1. what ia an optional function?

```
optional function is to **prevent NullpointerExcenption**.

methods: 

isPresent(): check optional instance is empty or not

of(object): pop out nullpointerexception if object is null

ofNullable(object): accept null value if object is null
```



### 2. what is a thread? what is multi-threading? why we need multithreading?

```
A theard is a minimum processing unit in a java process, a process is a an execution of a program, OS will assgin memory for each process. We need multithreading to achieve multi-tasking, and better ultulation of the CPUs, provide better user expericence.
```

### what is concurrency, what its relactionship with multi-thread （必考）

```
Concurrency is the ability of your program to deal (not doing) with many things at once and is achieved through multithreading. 
To recap, concurrency refers to how a single CPU can make progress on multiple tasks seemingly at the same time (AKA concurrently).
***Concurrency*** means that an application is making progress on more than one task - at the same time or at least seemingly at the same time (concurrently).
```

### 3. How to create a thread? what is the different between a callable interface and a runnable interface?

```
4ways
**1.extend thread class**

**2.implement runnable interface**

**3.implement callable interface** callable can have a return value callable can thorw an exception

**4.threadpool (Executors, excutorService, fork-join pool, completableFuture)**
```



### 4. what is a thread-pool?

```
A thread pool is a pool threads that can be "reused" to execute tasks, so that each thread may execute more than one task. A thread pool is an alternative to creating a new thread for each task you need to execute.
```

### what is Executors, excutorService, fork-join pool, completableFuture?(重点)

```
Executors:The Executor interface has a single execute method to submit Runnable instances for execution.

excutorService: The *ExecutorService* interface contains a large number of methods to **control the progress of the tasks and manage the termination of the service.** 

fork-join:It provides tools to help speed up parallel processing by attempting to use all available processor cores – which is accomplished **through a divide and conquer approach**.
```



### 5. what is the typical methods of a thread? what is sleep(), wait(), notify(), notifyAll() mean?

```
sleep(): Thread. sleep **causes the current thread to suspend execution for a specified period**. 
object.wait(): to suspend a thread
object.notify():  to wake a thread up The choice of exactly which thread to wake is nondeterministic and depends upon the implementation.				 (if none, JVM will pick one rondomly)
object,notifyAll(): This method simply wakes all threads that are waiting on this object's monitor. The awakened threads will complete in the usual manner, like any other thread.
```

### 6. what states a thread have? what are they meaning?

```
6
New: a thread not yet start
Runnable:  a thread is runnable/executing
Blocked: a thread waiting for a monitor **lock** --wait for getting the lock
Waiting: a thread waiting for another thread to perform a particular action, --happend after wait()/sleep(), wait for notify()
Timed_Waiting: hread state for a waiting thread with a specified time
Terminated: thread has complete execution and terminated
 
sleep vs wait: wait will release lock, sleep wont.
```

```
Block vs waiting

A thread goes to wait state once it calls wait() on an Object. This is called Waiting State. Once a thread reaches waiting state, it will need to wait till some other thread calls notify() or notifyAll() on the object.

Once this thread is notified, it will not be runnable. It might be that other threads are also notified (using notifyAll()) or the first thread has not finished his work, so it is still blocked till it gets its chance. This is called Blocked State. A Blocked state will occur whenever a thread tries to acquire lock on object and some other thread is already holding the lock.
```



### 7. what is the synchorizoned keyword? 

```
A piece of logic marked with synchronized becomes a synchronized block, allowing only one thread to execute at any given time.

**Synchorzied**: used on method, coupling and slow, the execuation will be in a random order (?). In other words, use synchorized with notifyAll( ) cannot contorl the order of thread execution.
```

### 8. what is a lock mean? what its different from synchorzoned?

```
an interface that lock() the resource for the thread to use, will unlock()  after use. wait will release lock, while sleep will not.

A lock and condition ususally use to control the execution flow.
```



### 9. what is the methods a lock has?

```
lock():
unlock():

Lock+condition:

condition.await()
condition.singal()
condition.singalAll()
```



### 10. what is in the start() function? what happen if it is override?

```
NATIVE METHOD start0( ); writted in C language, will start/run a thread. thread.start();

normally we cannot have a abstract method in a non-abstract class. BUT CAN HAVE A NATIVE METHOD.
```



### 11. what is a semaphore? what is the difference to Lock?

```
semaphore 给指定资源发permits， semaphore(1) 作用和lock一样。

但是semaphore可以**解决deadlock**: **通过一个非owner的线程来实现死锁恢复**，但如果你使用的是Lock则做不到，可以把代码中的两个信号量换成两个锁对象试试。很明显，前面也验证过了，要使用Lock.unlock()来释放锁，首先你得拥有这个锁对象，因此非owner线程（事先没有拥有锁）是无法去释放别的线程的锁对象。
```

### 12. what is a deadlock? how to solve a deadlock? (必考)

```
Deadlock occurs when multiple threads need the same locks but obtain them in different order.

solve: lock + condition
Avoid Nested Locks : This is the main reason for dead lock. Dead Lock mainly happens when we give locks to multiple threads. Avoid giving lock to multiple threads if we already have given to one.

Avoid Unnecessary Locks : We should have lock only those members which are required. Having lock on unnecessarily can lead to dead lock.

Using thread join : Dead lock condition appears when one thread is waiting other to finish. If this condition occurs we can use Thread.join with maximum time you think the execution will take.

```

### 13. what is a fork&join?

```
It provides tools to help speed up parallel processing by attempting to use all available processor cores – which is accomplished **through a divide and conquer approach**.

它的原理就是内部通过Fork/Join对大数组分拆进行并行排序，在多核CPU上就可以大大提高排序的速度。

- `fork()`：开启一个新线程（或是重用线程池内的空闲线程），将任务交给该线程处理。
- `join()`：等待该任务的处理线程处理完毕，获得返回值。
```



# lec6

## Questions

### 1.  what is a database? what is a DBMS? what is a file system?

### 2. what is a SQL? what is the normal sql-based tool?

### 3. what is the process to build a database?

### 4. what is an ER model? what is the features of each element in ER model?

### 5. what is the constrains in the relational model?

### 6. how to mapping from ER model to relational model?

### 7. what is the three types of Normalization? NF?



## Answers

### 1.  what is a database? what is a DBMS? what is a file system?

```
database: a collection of interrelated data which helps for retrieval, insertion and deletion.
dbms: database manage system, software to manage database, such as oracle, my sql
file system: a way of arranging files in sotrage medium like hard disk.
```



### 2. what is a SQL? what is the normal sql-based tool?

```
sql: strucutral qurey language,a tool to view or change database, most commen mysql, ms sql server. upper and lower case do not matter
```



### 3. what is the process to build a database?

```
idea -> high level design ->relational database schema -> relational databse
```



### 4. what is an ER model? what is the features of each element in ER model?

```
entity relationship model, its the structure of the database
entity: object of database
Attrubute: properties of enetity: key, composite, multivalue,derive(衍生)
Relationsip: ?degree of relationship: the number of entity involed: 
							Unary(one), Binary(two), N-ary(n)
						cardinality(基数) of relationship： 1 to 1, 1 to many, many to many
						participation constraint: total participation: entity has participate
																	partial participation: each entity may or may not participate
```



### 5. what is the constrains in the relational model?

```
domain constraints:each domain must contain atomic value (no composite or multivalued attributes)
key constarints: pk, unique, not null
referential integrity constrains: foregnor key must be real
```



### 6. how to mapping from ER model to relational model?

```
• step1: transfer each entity/relationship to a table
• step2: optimize / merge the tables
```



### 7. what is the three types of Normalization? NF?

```
normalization: eliminate redundant data and ensure the data is stored logically

### 1NF：消除重复

• each table cell should contain a single value
• each record needs to be unique

### 2NF：消除部份依赖 

example? 学号 课程号 姓名 学分
• be in 1NF
• single column primary key

### 3NF :消除传递依赖 
example? 学号 学生 所在学院 学院电话
• be in 2NF
• has no transitive functional dependencies
```

# Lec7

## Questions

### 1. what is a non-relational database?

### 2. what is the four typical non-relational database? what's their features?

### 3. what is the CAP theory? is it possible to reach all 3 of them? what dose mongoDB and redis belongs to ?

### 4. What is a sharding? what advantages to use it?

### 5. what is a replica?what advantages to use it?

### 6. what is a mongoDB? what features does it have?

### 7. what is a lead node? what is a secondray node?

### 8. what is a mongos? what is a config sever? what is a mongod?

### 9. what is the functionality of MongoDB?

### 10. what is a redis? what features does it have?

### 11. what is redis used for ?

### 12. what is the two prsistence mechanisms of redis?

### 13. what is the main features/advantages of redis?

### 14. what is a ditibuted lock/SETNX? what is a message system? can redis use to store ondifuration information?

### 15. comparsion between redis and MongoDB?



## Answers

### 1. what is a non-relational database?

```
does not use the tabular schema of rows and columns, Instead, it uses a storage model that is optimized for specific requirements of the type of data being stored.
```



### 2. what is the four typical non-relational database? what's their features?

```
document data store: key - document(BSON?), mongoDB
coulumnar data stores: divide data into columns one column is one topic, de-Nomorilization, Cassandra, Hbase
Key-value data store: a large hashtable, redis
Graph data store: node (entity) & edge(relaiontion), Neo4j, GrapDB
```



### 3. what is the CAP theory? is it possible to reach all 3 of them? what dose mongoDB and redis belongs to ?

```
Consistency: 一致性 all clients will always have the same view/version of data. when you write a piece of data in a system/distributed system, the same data you should get when you read it from any node of the system.

Availability: 可用性 each client can always read and write the data. The system should always be available for read/write operation.

Partition tolerance: 分区容错性 the system works well despite the physical network partition (always achieve in non-relation database since they are distributed)

CAP theorem: satisfying all three at the same time is impossible, **Most systems are not only available or only consistent, they always offer a bit of both**

CP 代表: BigTable, **MongoDB**, Hbase, **Redis**
example:
MongoDB is mostly always available, but, the only time when the leader is down, MongoDB can't accept writes, until it figures out the new leader. Hence, not `highly available`
```



### 4. What is a sharding? what advantages to use it?

```
Sharding is
• distributes a single logical database system across a cluster of machines
• use range-based partition to distribute documents based on a specific shard key

good for concurrency requests.
```



### 5. what is a replica?what advantages to use it?

```
• copy of database
• failover (zero downtime) : when the leader node is down, the follower will replace the leader so that the system is 0 downtime. 大哥倒了 小弟补位
```



### 6. what is a mongoDB? what features does it have?

```
is a documented database, use bson files as data. it is hash-based(?) schma-less datase, wtitted in C++  and support API in manu computer language. example : ebay

Each server can contain multiple shards, but the lead node and the following node will never on one server.
```

### how to find data in MongoDB

```
db.collection.find(query, projection)

> db.col.find({"by":"菜鸟教程", "title":"MongoDB 教程"}).pretty()

MongoDB 索引
>db.collection.createIndex(keys, options)
```



### 7. what is a lead node? what is a secondray node?

```
 primary mongod and secodary mongods(seconary is the replica of data.)
```



### 8. what is a mongos? what is a config sever? what is a mongod?

```
Mongos: sharding process (类似router)
config sever: save metadata and To determine which shard to go to\
mongod: database instance, a Node
```

metadata:data that provides information about other data

### 9. what is the functionality of MongoDB?

```
• dynamic schema
• document based
• support **secondary indexes** (expect primary index, all other index are secondary index)
• master-slave replication
• horizontal scaling
• range based partition
• no joins and transactions
• CP
```



### 10. what is a redis? what features does it have?

```
Redis (remote directory server) is an **in-memory,** **key value data**，完全基于内存 based on memory only
```

### 11. what is redis used for ?

```
used for cache, distubuted session, distrubute lock, message system etc.
- 存储 **缓存** 用的数据；
- 需要高速读/写的场合**使用它快速读/写**
```



### 12. what is the two prsistence mechanisms of redis?

```
• RDB (redis database): the RDB persistence performs point-in-time snapshots of dataset as specified intervals 按时备份
• AOF (append only file): the AOF persistence logs every write operation received by the server 记录写操作
```



### 13. what is the main features/advantages of redis?

```java
• Very fast
• various data types
• support persistence mechanism 
• support cluster mode
```



### 14. what is a ditibuted lock/SETNX? what is a message system? can redis use to store ondifuration information?

### 15. comparsion between redis and MongoDB?

```
`MongoDB`应用场景：大规模不需要事务及复杂join支持,需要快速读写及水平扩展：如craglist，

`Redis`应用场景：高性能，单进程， 多用于缓存，秒杀场景。
```



# lec8 

### 1. comparesion of SQL and no-sql?

```
SQL: relational,fixed schema, verticall sacalable, not suite for hierachical, ACID
No-sql: non-relations, dynamic schema, horizontl sacable, suite for hiernachical, CAP
```

### 2. what is veritcal scaling and what is horizontal scaling?

```
vertical: powerful query, processing faster
horizontal: add more nodes/server in the database
```



### 3. what is ACID?

```
same as the trasaction ACID.
```



### 4. what is an index in sql? what is a cluster index and what is a non-cluster index?

```
Indexing is a way to optimize the performace of a database by minimizing the number of disk accesses. B+ tree used
clustered index: most of time is primary key, defines the order in which data is **physically stored**, only one table have only one order -> **one cluster index per table**
non-clustered index: doesn't sort the physical data inside the table,allow to have more than one non-cluster index per table
```



### 5. what is a B tree and B+ tree?

```
-a binary tree to search for index.
-only lead nodes have pointers to data
-leaf nodes are linkedlist.
-deletion and insertion faster than B tre.
```



### 6. what is a hash index? what is a bitmap index?

```
search based on hashcode, good for looking up values, B+ tree is better for range search.
```

### 7. what is a RBDMS exexution process?



### 8. what is SQL tuning?

```
1. using **execution plan** to identify the cause of slowness 诊断原因
2. try to reduce joins. remove unused join and join conditions
3. use UNION ALL (do not remove duplicate data) instead UNION (will remove duplicate data)
4. use the LIMIT to do the pagination 分页 to get part of the data?
5. Create View or stored procedure to improve performance
6. avoid using IN，O(N*M) time
```



# lec9

## Questions:

### 1. what is a transaction?

### 2. what is a ACID of transaction?

### 3. what is a rollback? what is a commit?

### 4. what is a dirty read? what is an unrepeatable read? what is a phantom read?

### 5. what is the isolation levels? on each level, what is the restraints? 

### 6. what is the types of lock? what is a binay lock / sharded lock / exclusive lock?

### 7. what is a read lock? what is a write lock?

### 8.  what is a range lock?

### 9. what lock required for each isolation level?

### 10. what is a dead lock? how to prevent a dead lock?

### 11. what is  optimitic lock? how to achieve an optimistic lock?

### 12. what is pessimistic lock? how to achieve and prssimistic lock?

### 13. what is distibuted transaction?

### 14. what is 2pc? describe how it work.

### 15. what is saga? what is the two types of saga? describle how each of them work/.



## Answers:

### 1. what is a transaction?

```sql
is an action or series of actions carried out by a user or application, which reads or writes the contents of a database.
```

### 2. what is a ACID of transaction?

```sql
A: atomtic, a trascation cannot be partillay done.
C: consistancy, trasactions take database from one consisteent state into another
I: isolation, the effect of a trasaction is not visiable to other trasaction until it is done.
D: durabilty, once transcition is done, the changes are permanent 
```



### 3. what is a rollback? what is a commit?

```sql
rollback: abort a trancision, database back to the status before transition.
commit: finish a traciion, the changes are permanent.
```



### 4. what is a dirty read? what is an unrepeatable read? what is a phantom read?

```java
dirty read: read UNCOMMITED data from another transaction (NO WRITE LOCK)
unrepeatable read: read COMMITED data from an update query from another transaction (NO READ LOCK)
phantom read: read COMMITED data from an insert query from another transcation (NO RANGE LOCK)
```



### 5. what is the isolation levels? on each level, what is the restraints? 

```sql
Transactions specify an isolation level that defines the degree to which one transaction must be isolated from resource or data modifications made by other transactions.

read uncommited: dirty read (Y), unrepeatable read (Y), phantom read (Y).

read commited: dirty read (N), unrepeatable read (Y), phantom read (Y).

repeatable read: dirty read (N), unrepeatable read (N), phantom read (Y).

serizaliable: dirty read (N), unrepeatable read (N), phantom read (N). all transactions will   execute in a certain schedule.

The higher the isolation, the more locks requires, the more slower.
```



### 6. what is the types of lock? what is a binay lock / sharded lock / exclusive lock?

```sql
binary lock: 1 means locked, 0 means unlocked.

shared lock: read lock 大家都只能读不能写, are shared by the trasctions with the same opreations
exculsive lock: write lock, 独占，只有lock holder可以读和写.其他no access.
```



### 7. what is a read lock? what is a write lock?

### 8.  what is a range lock?

```sql
used for serilizeable isolation. 

是一种加在两个索引之间的**锁**，或者加在第一个索引之前，或最后一个索引之后的间隙。 有时候又称为**范围锁**（**Range Locks**），这个**范围**可以跨一个索引记录，多个索引记录，甚至是空的。 使用间隙**锁**可以防止其他事务在这个**范围**内插入或修改记录，**保证两次读取这个范围内的记录不会变**，从而不会出现幻读现象。虽然解决了幻读问题，但是数据库的并发性一样受到了影响.
```

### 9. what lock required for each isolation level?

```sql
read uncommited: No Lock.

read commited: Continuous read lock, temproily write lock.

repeatable read: Continuous read lock, Continuous  write lock.

serizaliable: range lock or other table-level lock.
```



### 10. what is a dead lock? how to prevent a dead lock?

```sql
both transactions wait for other to release a lock. it happen when a cycle is detect in a wait for graph.

? to prevent dead lock, one method is to use a conservative 2PL, or put a time limit on the wait(), make it wait-die or wound -wait.
```



### 11. what is  optimitic lock? how to achieve an optimistic lock?

```sql
an optomistic lock means the transcation is optimistic, and will not put a lock on data, instead  the trascation will check the status of the database when update, if the status is consistant, the update will be done, other way it will be aborted.

two ways to implement: 
1.version number
2.time stamp
```



### 12. what is pessimistic lock? how to achieve and prssimistic lock?

```sql
a pessimistci lock means the transcation is pessimistic, it always assume the data will be update by others, thus it will keep the lock unitil the trascation is finised.

Java synchrozied is a typical type of pessimistic lock, the lock is required at everytime and there can be only one thread making changes on the database, other thread will be blocked.
```



### 13. what is distibuted transaction?

```
A distributed transaction is a set of operations on data that is performed across two or more data repositories (especially databases). It is typically coordinated across separate nodes connected by a network, but may also span multiple databases on a single server.
**分布式事务是为了解决微服务架构（形式都是分布式系统）中不同节点之间的数据一致性问题。这个一致性问题本质上解决的也是传统事务需要解决的问题，即一个请求在多个微服务调用链中，所有服务的数据处理要么全部成功，要么全部回滚**
```



### 14. what is 2pc? describe how it work.

```
two phase commited.
it is a centralized tranaction protocol contains one coordinator and many particpants
• transaction coordinator sends prepare message to each participating node
• each participating node responds to coordinator with prepared or no
• if coordinator receives all prepared: broadcast commit 
• if coordinator receives any no: broadcast abort
```

### 15. what is saga? what is the two types of saga? describle how each of them work/.

```
A saga is a sequence of transactions that updates each service and publishes a message or event to trigger the next transaction step. ... If a step fails, the saga executes compensating transactions that counteract the preceding transactions.

Choreograph each local transaction publishes domain events that trigger local transactions in other services
参与者（子事务）之间的调用、分配、决策和排序，通过交换事件进行进行。是一种去中心化的模式，参与者之间通过消息机制进行沟通，通过监听器的方式监听其他参与者发出的消息，从而执行后续的逻辑处理。由于没有中间协调点，靠参与靠自己进行相互协调。
Orchestration an orchestrator tells the participants what local transactions to execute
Saga提供一个控制类，其方便参与者之前的协调工作。事务执行的命令从控制类发起，按照逻辑顺序请求Saga的参与者，从参与者那里接受到反馈以后，控制类在发起向其他参与者的调用。所有Saga的参与者都围绕这个控制类进行沟通和协调工作
```

# Lec10

## Questions

### 1. how many pk can a table have? what is a combined pk?

```
The PRIMARY KEY constraint uniquely identifies each record in a table. A table can have only ONE primary key; and in the table. A composite primary key, also called a composite key, is a combination of two or more columns to form a primary key for a table
```

### 2. basic opreations in sql, practive in mysql.

# Lec11

## Questions

### 1. what is a JDBC? what is the steps fro JDBC to database?

### 2. what is try with resources?

### 3. what is the resultSetMetaDat?

### 4. what is sql injection?

### 5. what is the preparedStatement?

### 6. what is batch processing?

### 7. what is Hibernate? what its relation iwht JPA?

### 8. what is the first level cache and seceond level cache?

### 9. what is the mapping types in Hibernate and how do they been implement?

### 10. what is the fetch type means and where does it apply?

### 11. what is a Cascade type? how many kinds and what do they do?

### 12. what is the different between JDBC and Hibernate?



## Answers

### 1. what is a JDBC? what is the steps fro JDBC to database?

```
JDBC (java database connectivity) Driver : software component that enables java applications to interact with the database.

1. allocate 分配a connection object
2. allocate a statement
3. write sql quey and execute the query 
4. process the query result
5. close the statement, connection object
```

### 2. what is try with resources?

```
The try -with-resources statement is a try **statement that declares one or more resources**. A resource is an object that must be closed after the program is finished with it. The try -with-resources statement ensures that each resource is closed at the end of the statement. Any object that implements java.

 try-with-resources语句确保在语句执行完毕后，每个资源都被自动关闭 
```



### 3. what is the resultSetMetaDat?

```
ResultSet object is associated with a header (called meta data), which contains information about the resultset object
```

### 4. what is sql injection?

```
SQL injection is a web security vulnerability that allows an attacker to interfere with the queries that an application makes to its database. It generally allows an attacker to view data that they are not normally able to retrieve. This might include data belonging to other users, or any other data that the application itself is able to access. In many cases, an attacker can modify or delete this data, causing persistent changes to the application's content or behavior.

To prevent: Most instances of SQL injection can be prevented by using parameterized queries (also known as prepared statements) instead of string concatenation within the query. 只能插入特定值，不能自己构造语句。
```

### 5. what is the preparedStatement?

```
• allows you to pass parameters into a sql statement
 • pre-complied
 • execute the same sql statement multiple times
 
 PreparedStatement pstmt = conn.prepareStatement(
                        "insert into books values (?, ?, ?)"
                );
```

### 6. what is batch processing?

```
- each statement can be added into the batch via .addBatch() method
- execute the batch by executeBatch()
```

### 7. what is Hibernate? what its relation iwht JPA?

```
Hibernate is an implemtation of JPA(Java Presiste API) using ORM(Object Relational Mapping) techniques.

JPA: defines the management of relational data in java application
ORM: is the approach of taking object-oriented data and mapping to a relational data store (e.g. tables in an RDBMS)
```



### 8. what is the first level cache and seceond level cache?（必考）

```
**First**: **open by default, session level, locally, if session closed, cache is gone**
**Second**: **close by default,** session factory level, globally, if seesion factory shut down, cache is gone
Query -> first level cache -> second level cache (need open mannually)-> database
```



### 9. what is the mapping types in Hibernate and how do they been implement?（必考）

```
one to one 实现： FrogienKey JoinTable

one to many 实现： FrogienKey JoinTable

many to many 实现： 需要中间表 JoinTable
```



### 10. what is the fetch type means and where does it apply?（必考）

```
Lazy: 不与child table 联动

Eager: 与child table联动


```



### 11. what is a Cascade type? how many kinds and what do they do?（必考）

```
Cascading is the way to achieve this. **When we perform some action on the target entity, the same action will be applied to the associated entity.**

*ALL*: **propagates all operations — including Hibernate-specific ones — from a parent to a child entity.**
*PERSIST*: The persist operation makes a transient instance persistent. **Cascade Type \*PERSIST\* propagates the persist operation from 			a parent to a child entity.** 
*MERGE*: The merge operation copies the state of the given object onto the persistent object with the same identifier.CascadeType.MERGE\* 			propagates the merge operation from a parent to a child entity**  
*REMOVE*: as the name suggests, the remove operation removes the row corresponding to the entity from the database and also from the 				persistent context.
*REFRESH*: Refresh operations **reread the value of a given instance from the database.** In some cases, we may change an instance after 			persisting in the database, but later we need to undo those changes.
*DETACH*:The detach operation removes the entity from the persistent context. **When we use \*CascadeType.DETACH\*, the child entity will 			also get removed from the persistent context.**
*REPLICATE*: **The replicate operation is used when we have more than one data source and we want the data in sync.**
*SAVE_UPDATE*: *CascadeType.SAVE_UPDATE* propagates the same operation to the associated child entity.
*LOCK*:**Unintuitively, \*CascadeType.LOCK\* reattaches the entity and its associated child entity with the persistent context again**
```

### FTECH TYPE  VS  CACSCADE

```
The CascadeType in Hib. could be REFRESH, MERGE, ..., ALL you put it under the related entity and it determines the behavior of the related entity if the current entity is: refreshed, updated, deleted, e.t.c.. So whenever you entity is affected the CascadeType tells if the related entity should be affected as well.

The FetchType could be only of 2: EAGER and LAZY. This one you as well put under the related entity and it determines whether the related entity should be initialized right away when the current entity is initialized (EAGER) or only on demand (LAZY).
```



### 12. what is the different between JDBC and Hibernate?



# Lec12 

## Questions

### 1. what is a creation pattern? what is a structural pattern? what is a behavioral pattern?

### 2. what is a singleton design pattern? what it can be used as? what is the advantanges and disadvantages?

### 3. how to make a singltion pattern synchronized? why use votile key word?

### 4. what is a builder design pattern? what it can be used as? what is the advantanges and disadvantages?

### 5. what is a factory design pattern? what it can be used as? what is the advantanges and disadvantages?

### 6. what is a proxy design pattern? what it can be used as? what is the advantanges and disadvantages?

### 7. what is a reflection API? what it used for? why people use it?

### 8. how get class/method/argument using reflection API? 

### 9. does the reflection API volites the encapsulation of Java?



## Answers

### 1. what is a creation pattern? what is a structural pattern? what is a behavioral pattern?

```
creational patterns: hiding the creation logic, seprating the creation and using of objects. singleton pattern, facttory patter, builder pattern

strucutral pattern: concern about class and object composition, using simple objects and combined into complex structure. proxy patter

behavioral patter: concern the behaviour of the object, or to say concern about the communication between objects, observer pattern


```

### 2. what is a singleton design pattern? what it can be used as? what is the advantanges and disadvantages?

```
only one instance is created. It can be used as logger, driver objects, caching, thread pool and so on.

pro: only one instance means we do not need to create and destory multi instances, which decrease the usage of memory.
?con: conflic with single responsity, a class should concern about its inside logic, not about how it should be instanced

use: when only need one global instance

```



### 3. how to make a singltion pattern synchronized? why use votile key word?

```
 use sychorizned when we need to create a new instance, 
 use voltile on the instance it can prevent CPU instruction reorder and to aviod the possible situation.
```



### 4. what is a builder design pattern? what it can be used as? what is the advantanges and disadvantages?

```
builder is a creational design pattern that lets you construct complex objects step by step.
Instead of declare different type of constructors, the builder pattern can build the object with input features.

pro: easy to build and expandation, same process but different instance.
con: the product shoud share similiaries, and if there will be a lot of classes created if the changes are complex.

use: when the objects has complex inside logics and contains more than one attribteds.

```



### 5. what is a factory design pattern? what it can be used as? what is the advantanges and disadvantages?

```
we create objects without exposing the creation logic to the client and refer to newly created objects using a common interface.

pro:to create one object, client only need to know the name.if we want add a new product, just need to add one more class.
		
con:every time a new product need a new class, it will add the complexity to the system. and it couples the system to the class.

use: we need some object but we only know the name. Hibernate can just change the 方言 and dirver to connet different database.
```



### 6. what is a proxy design pattern? what it can be used as? what is the advantanges and disadvantages?

```
provide substitute for another object, control the access to the original objects, perform some operations before and after request/response(AOP?)

static: create before invoke
dyanamic: create when invoke during runtime.

pro: separete the proxy and real object, decoupling the system,protect the orignal object.
con:lower process speed and increate the comlexity of the system.

use: AOP
```



### 7. what is a reflection API? what it used for? why people use it?

```
Reflection is an API which is used to examine or modify the behavior of methods, classes, interfaces at the run time. (是不是不利于encapsulation)

It can be used to get the class of an object, instance a class, get the information about the attributes and method of a class, and invoke a class method, as well as modify the access modifier(?) of the method(private).

people use it to?
```



### 8. how get class/method/argument using reflection API? 

### 9. does the reflection API volites the encapsulation of Java?

# Lec13

## Questions

### 1. what is the three way handshake?

### 2. what is the HTTP method? how many types? why Post is not idempotency?

### 3. What is HTTP status code 200,300,400,500 means?

### 4. what is cookie?



## Answers

### 1. what is the three way handshake?

```
client -SYN-> server
server -ACK+SYN-> client
client -ACK-> server
```



### 2. what is the HTTP method? how many types? why Post is not idempotency?

```
CRUD: creat, read, update, delete
GET:
POST: not idempotent
PUT:
DELETE:
```



### 3. What is HTTP status code 200,300,400,500 means?

```
100 - informational response
200 Sucess- 200 OK for GET Method, return resouce
						201 OK for POST/PUT method, new resouce created 
						204 OK for server finish ob, no return

300 redirect- 301 moved premanetly, will redirect to new address
							304 redirect the broswer caching ?

400 client error- 404 NOT found ?
									401 password required
									403 account/permission need, password donot apply
									410 resource no longer avaiable anymore

500 server error- 503 serivice unavaiable server is under maintance or too busy to response
```



### 4. what is cookie?



# Lec14

## Questions

### 1. what is HTTP/HTTPS?

### 2. what is a http request content? what is a http response content?

### 3. what are the http methods? what are they used for?(必考)

### 4. what is the different between put and post?

### 5. what is status code meaning(必考)?

### 6. what happend when you input a url in a broswer?

### 7. what is TCP? what is 3 way hand shake? 4 way handshake?

### 

# Lec15&16&17

## Quetions

### 1. what is the 3-layer of a web application?

### 2. what is Spring Framework? what is the advantage of Spring?

### 3. what is the iniliaztion steps of a Spring Web Application? 

### 4. what are the annotations represent for ?

### 5. what ia applciation context? what is a bean factory?

### 6. what is the name convention of Java?

### 7. what is Dependecy Injection/Inverse of control?(必考)

### 8. how many type of DI ?

### 9. what is the relation beweent bean factory and factory desgin pattern?

### 10. what is the scope of a bean?

### 11. what is the different beween component and bean?

### 12. what is AOP? why we need AOP?

### 13. how to implement AOP?

### 14. what is the relation between AOP and proxy?

### 15. what is the AOP keywords meaning?(必考)

### 16. how many type of advice?

### 17. what is the @transcational mean?

### 18. what is a dipatchedsevlert?

### 

# Lec 18

## Questions

### 1. what is a Restful API?(必考)

### 2. what is an URI?

### 3. what is the URL meaning?

### 4. what is a pagination? what is the purpose of using it ?

### 5. what are the Restful annotations meaning?































